(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{otgk:function(e,t,n){"use strict";n.r(t),n.d(t,"NotaPageModule",function(){return L});var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),a=n("FWDm"),c=n("XNiG"),l=n("lJxs"),u=n("eIep"),b=n("UXun"),d=n("IzEk"),h=n("1G5W"),f=n("pLZG"),m=n("fXoL"),p=n("jL9G");let v=(()=>{class e{constructor(t,n){this.elementRef=t,this.renderer=n,this.observer=new MutationObserver(()=>{setTimeout(()=>{this.onChange(e.processValue(this.elementRef.nativeElement.innerHTML))})}),this.onTouched=()=>{},this.onChange=()=>{}}ngAfterViewInit(){this.observer.observe(this.elementRef.nativeElement,{characterData:!0,childList:!0,subtree:!0})}ngOnDestroy(){this.observer.disconnect()}onInput(){this.observer.disconnect(),this.onChange(e.processValue(this.elementRef.nativeElement.innerHTML))}onBlur(){this.onTouched()}writeValue(t){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",e.processValue(t))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.renderer.setAttribute(this.elementRef.nativeElement,"contenteditable",String(!e))}static processValue(e){const t=e||"";return"<br>"===t.trim()?"":t}}return e.\u0275fac=function(t){return new(t||e)(m.Lb(m.m),m.Lb(m.F))},e.\u0275dir=m.Gb({type:e,selectors:[["","contenteditable","","formControlName",""],["","contenteditable","","formControl",""],["","contenteditable","","ngModel",""]],hostBindings:function(e,t){1&e&&m.Yb("input",function(){return t.onInput()})("blur",function(){return t.onBlur()})},features:[m.Ab([{provide:o.g,useExisting:Object(m.U)(()=>e),multi:!0}])]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Jb({type:e}),e.\u0275inj=m.Ib({}),e})();const w=["divContenido"],C=["divTitulo"];function x(e,t){if(1&e){const e=m.Rb();m.Ob(0),m.Qb(1,"ion-toolbar"),m.Qb(2,"ion-buttons",1),m.Mb(3,"ion-back-button",2),m.Pb(),m.Qb(4,"ion-buttons",3),m.Qb(5,"ion-button",4),m.Yb("click",function(){return m.jc(e),m.ac().guardar()}),m.oc(6,"Guardar"),m.Pb(),m.Pb(),m.Pb(),m.Qb(7,"ion-content"),m.Qb(8,"div",5),m.Qb(9,"ion-text",6),m.Qb(10,"div",7),m.Qb(11,"div",8,9),m.Yb("keydown.enter",function(t){m.jc(e);const n=m.ac();return t.preventDefault(),n.enfocarContenido()}),m.Pb(),m.Mb(13,"div",10,11),m.Pb(),m.Qb(15,"p",12),m.oc(16),m.bc(17,"date"),m.Pb(),m.Pb(),m.Pb(),m.Pb(),m.Nb()}if(2&e){const e=t.ngIf,n=m.ac();m.Bb(5),m.gc("disabled",n.form.invalid),m.Bb(3),m.gc("formGroup",n.form),m.Bb(8),m.pc(m.cc(17,3,e.fecha))}}const T=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,s){this.route=e,this.bitacoraService=t,this.fb=n,this.router=i,this.document=r,this.window=s,this.nota$=this.route.paramMap.pipe(Object(l.a)(e=>e.get("notaId")),Object(u.a)(e=>this.bitacoraService.obtenerNota(e)),Object(b.a)()),this.form=this.fb.group({titulo:["",o.m.required],contenido:["",o.m.required]}),this.destroy$=new c.a}ngOnInit(){this.nota$.pipe(Object(d.a)(1)).subscribe(e=>this.form.patchValue(e||{})),this.form.get("contenido").valueChanges.pipe(Object(h.a)(this.destroy$),Object(f.a)(e=>!e)).subscribe(()=>this.enfocarTitulo())}guardar(){this.bitacoraService.agregarNota(this.form.value).subscribe(()=>this.router.navigate([".."],{relativeTo:this.route}))}enfocarContenido(){const e=this.document.createRange(),t=this.window.getSelection();this.divContenido.nativeElement.lastChild?(e.setStart(this.divContenido.nativeElement.lastChild,this.divContenido.nativeElement.lastChild.textContent.length),e.collapse(!0),t.removeAllRanges(),t.addRange(e)):this.divContenido.nativeElement.focus()}enfocarTitulo(){const e=this.document.createRange(),t=this.window.getSelection();this.divTitulo.nativeElement.lastChild?(e.setStart(this.divTitulo.nativeElement.lastChild,this.divTitulo.nativeElement.lastChild.textContent.length),e.collapse(!0),t.removeAllRanges(),t.addRange(e)):this.divTitulo.nativeElement.focus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(m.Lb(s.a),m.Lb(p.a),m.Lb(o.a),m.Lb(s.g),m.Lb(i.d),m.Lb(a.b))},e.\u0275cmp=m.Fb({type:e,selectors:[["app-nota"]],viewQuery:function(e,t){if(1&e&&(m.rc(w,1),m.rc(C,1)),2&e){let e;m.hc(e=m.Zb())&&(t.divContenido=e.first),m.hc(e=m.Zb())&&(t.divTitulo=e.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["slot","start"],["defaultHref","/bitacora"],["slot","end"],[3,"disabled","click"],[1,"p-4","h-full","flex","max-w-full",3,"formGroup"],["color","tertiary",1,"flex-1","flex","flex-col","max-w-full"],[1,"flex","flex-1","flex-col","border","rounded","max-w-full"],["contenteditable","","formControlName","titulo",1,"p-2","focus-visible:outline-none","text-4xl","font-bold","max-w-full","whitespace-pre-wrap",3,"keydown.enter"],["divTitulo",""],["contenteditable","","formControlName","contenido",1,"flex-1","p-2","focus-visible:outline-none","max-w-full","whitespace-pre-wrap"],["divContenido",""],[1,"text-xs"]],template:function(e,t){1&e&&(m.mc(0,x,18,5,"ng-container",0),m.bc(1,"async")),2&e&&m.gc("ngIf",m.cc(1,1,t.nota$))},directives:[i.k,r.E,r.e,r.b,r.c,r.d,r.k,o.j,o.e,r.C,v,o.i,o.d],pipes:[i.b,i.e],encapsulation:2}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Jb({type:e}),e.\u0275inj=m.Ib({imports:[[s.i.forChild(T)],s.i]}),e})();var E=n("PCNd");let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Jb({type:e}),e.\u0275inj=m.Ib({imports:[[i.c,o.f,o.l,r.F,y,g,E.a]]}),e})()}}]);